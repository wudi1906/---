# 作品集运行指南

本文档提供所有6个作品集项目的快速启动指南。

## 前置要求

### 通用依赖
- **Python 3.10+**
- **Node.js 18+** (项目3、5需要)
- **PowerShell 5.1+** (Windows)
- **Docker & Docker Compose** (可选，推荐用于生产部署)

### 可选依赖
- **PostgreSQL** (项目2推荐)
- **Git** (版本控制)

## 快速启动

### 方式1：一键安装所有项目

```PowerShell
# 在作品集根目录运行
pwsh .\setup.ps1
```

这将为所有项目创建虚拟环境并安装依赖。

### 方式2：逐个启动项目

---

## 项目 1: Global Price Sentinel

**端口**: 8101  
**技术栈**: Python + Playwright + FastAPI

### 启动

```PowerShell
cd .\global-price-sentinel
pwsh .\scripts\start.ps1 --install
```

### 访问

- 主页: http://localhost:8101
- API 文档: http://localhost:8101/api/docs
- 最新报告: http://localhost:8101/reports/latest.html

### 配置

1. 复制 `env.example` 为 `.env`
2. 复制 `configs/targets.example.yml` 为 `configs/targets.yml`
3. 编辑配置文件填写监控目标

### Docker 启动

```bash
docker compose up --build
```

### 演示

运行一次监控：

```PowerShell
python -c "from app.monitor import run_monitor_cycle; from app.models import TargetConfig; import asyncio; asyncio.run(run_monitor_cycle([TargetConfig(id='test', url='https://example.com', currency='USD')]))"
```

---

## 项目 2: Event Relay Hub

**端口**: 8202  
**技术栈**: Python + FastAPI + PostgreSQL/SQLite

### 启动

```PowerShell
cd .\event-relay-hub
pwsh .\scripts\start.ps1 --install
```

### 访问

- 主页: http://localhost:8202
- API 文档: http://localhost:8202/api/docs
- 事件列表: http://localhost:8202/api/events

### 测试 Webhook

模拟 GitHub Webhook：

```PowerShell
$body = @{
    repository = @{ full_name = "user/repo" }
    action = "opened"
} | ConvertTo-Json

Invoke-RestMethod -Uri "http://localhost:8202/webhook/github" `
    -Method POST `
    -Body $body `
    -ContentType "application/json" `
    -Headers @{ "X-GitHub-Event" = "pull_request" }
```

### Docker 启动 (含 PostgreSQL)

```bash
docker compose up --build
```

---

## 项目 3: SaaS Northstar Dashboard

**端口**: 8303  
**技术栈**: Next.js + React + Tailwind + Chart.js

### 启动

```PowerShell
cd .\saas-northstar-dashboard

# 安装依赖
npm install

# 开发模式
npm run dev

# 生产构建
npm run build
npm start
```

### 访问

- Dashboard: http://localhost:8303
- 导入页面: http://localhost:8303/import

### 示例数据

提供了3份示例CSV文件在 `data/samples/` 目录：
- `subscriptions.csv` - 订阅数据
- `churn.csv` - 流失数据
- `acquisition.csv` - 获客成本

### 功能演示

1. 访问导入页面
2. 上传示例CSV文件
3. 查看自动生成的MRR/ARR/Churn/LTV指标
4. 导出为PNG图片

---

## 项目 4: Doc Knowledge Forge

**端口**: 8404  
**技术栈**: Python + FastAPI + Elasticsearch (可选)

### 启动

```PowerShell
cd .\doc-knowledge-forge
pwsh .\scripts\start.ps1 --install
```

### 访问

- 主页: http://localhost:8404
- 上传页面: http://localhost:8404/upload
- 搜索: http://localhost:8404/search

### 支持格式

- PDF (.pdf)
- Word (.docx, .doc)
- Markdown (.md)
- 纯文本 (.txt)

### 演示

1. 上传10个文档
2. 系统自动转换为Markdown
3. 搜索关键词查看高亮结果
4. 下载打包归档

---

## 项目 5: A11y Component Atlas

**端口**: 8505 (Storybook)  
**技术栈**: React + Radix UI + Tailwind + Storybook

### 启动

```PowerShell
cd .\a11y-component-atlas

# 安装依赖
npm install

# 启动 Storybook
npm run storybook
```

### 访问

- Storybook: http://localhost:8505

### 组件列表

- Button (按钮)
- Input (输入框)
- Select (选择器)
- Modal (对话框)
- Table (表格)
- Tabs (标签页)

### 可访问性测试

```PowerShell
# 运行 Lighthouse
npm run lighthouse

# 运行单元测试
npm test
```

### 主题切换

所有组件支持亮/暗两种主题，可在 Storybook 控制面板切换。

---

## 项目 6: Insight Viz Studio

**端口**: 8606  
**技术栈**: Python + FastAPI + ECharts + Pandas

### 启动

```PowerShell
cd .\insight-viz-studio
pwsh .\scripts\start.ps1 --install
```

### 访问

- 主页: http://localhost:8606
- 上传页面: http://localhost:8606/upload

### 支持数据格式

- CSV (.csv)
- JSON (.json)
- Excel (.xlsx, .xls)

### 演示

1. 上传示例数据集（`data/samples/sales.csv`）
2. 选择图表类型（折线图/柱状图/饼图/漏斗图）
3. 自定义配置（标题、颜色、标签）
4. 导出为PNG/PDF

---

## 常见问题

### Q1: PowerShell 执行策略错误

```PowerShell
Set-ExecutionPolicy -Scope Process -ExecutionPolicy Bypass
```

### Q2: Python 虚拟环境激活失败

```PowerShell
# 手动激活
.\.venv\Scripts\Activate.ps1
```

### Q3: 端口被占用

修改各项目的 `.env` 文件中的 `PORT` 配置。

### Q4: Playwright 安装失败

```PowerShell
# 手动安装浏览器
playwright install chromium
```

### Q5: Node.js 依赖安装慢

```PowerShell
# 使用国内镜像
npm config set registry https://registry.npmmirror.com
```

---

## 停止服务

在运行的终端窗口按 `Ctrl+C` 停止服务。

Docker 容器停止：

```bash
docker compose down
```

---

## 生产部署

### Render/Fly.io 部署

每个项目都包含 `Dockerfile`，可直接部署到：
- Render.com
- Fly.io
- Railway
- Vercel (Next.js项目)

### 环境变量

部署前确保在平台设置所有必需的环境变量（参考各项目的 `.env.example`）。

---

## 技术支持

如遇问题，请查看各项目目录下的 `README.md` 获取详细文档。

### 项目目录结构

```
作品集/
├── README.md                        # 总览
├── 运行指南.md                      # 本文档
├── setup.ps1                        # 一键安装脚本
├── global-price-sentinel/           # 项目1
├── event-relay-hub/                 # 项目2
├── saas-northstar-dashboard/        # 项目3
├── doc-knowledge-forge/             # 项目4
├── a11y-component-atlas/            # 项目5
└── insight-viz-studio/              # 项目6
```

---

## 性能指标参考

| 项目 | 启动时间 | 内存占用 | 并发能力 |
| --- | --- | --- | --- |
| Global Price Sentinel | ~3s | ~150MB | 50+ req/s |
| Event Relay Hub | ~2s | ~100MB | 200+ req/s |
| SaaS Dashboard | ~5s | ~200MB | 100+ req/s |
| Doc Forge | ~3s | ~180MB | 80+ req/s |
| Component Atlas | ~8s | ~250MB | N/A (静态) |
| Viz Studio | ~3s | ~160MB | 100+ req/s |

---

**最后更新**: 2025-10-25

